var s={},d,c,a=$("#container-publications");if(a.length){a.isotope({itemSelector:".isotope-item",percentPosition:!0,masonry:{columnWidth:".grid-sizer"},filter:function(){let t=$(this),e=d?t.text().match(d):!0,n=c?t.is(c):!0;return e&&n}});let o=$(".filter-search").keyup(f(function(){d=new RegExp(o.val(),"gi"),a.isotope()}));$(".pub-filters").on("change",function(){let e=$(this)[0].getAttribute("data-filter-group");if(s[e]=this.value,c=u(s),a.isotope(),e==="pubtype"){let n=$(this).val();n.substr(0,9)===".pubtype-"?window.location.hash=n.substr(9):window.location.hash=""}})}function f(o,t){let e;return t=t||100,function(){clearTimeout(e);let r=arguments,i=this;function l(){o.apply(i,r)}e=setTimeout(l,t)}}function u(o){let t="";for(let e in o)t+=o[e];return t}function m(){if(!a.length)return;let o=window.location.hash.replace("#",""),t="*";o!=""&&(t=".pubtype-"+o);let e="pubtype";s[e]=t,c=u(s),a.isotope(),$(".pubtype-select").val(t)}document.addEventListener("DOMContentLoaded",function(){$(".pub-filters-select")&&m(),$(".js-cite-modal").click(function(o){o.preventDefault();let t=$(this).attr("data-filename"),e=$("#modal");e.find(".modal-body code").load(t,function(n,r,i){r=="error"?$("#modal-error").html("Error: "+i.status+" "+i.statusText):$(".js-download-cite").attr("href",t)}),e.modal("show")}),$(".js-copy-cite").click(function(o){o.preventDefault();let t=$(this).html(),e=$(this),n=document.querySelector("#modal .modal-body code").innerHTML;navigator.clipboard.writeText(n).then(function(){console.debug("Citation copied!"),e.html(i18n.copied),setTimeout(()=>{e.html(t)},2e3)}).catch(function(){console.error("Citation copy failed!"),e.html("Error!"),setTimeout(()=>{e.html(t)},2e3)})})});document.querySelectorAll("pre > code").forEach(o=>{let t=o.parentNode.parentNode,e=document.createElement("button"),n=["btn","btn-primary","btn-copy-code"];e.classList.add(...n),e.innerHTML=i18n.copy;function r(){e.innerHTML=i18n.copied,setTimeout(()=>{e.innerHTML=i18n.copy},2e3)}e.addEventListener("click",()=>{if(console.debug("Code block copy click. Is secure context for Clipboard API? "+window.isSecureContext),"clipboard"in navigator){navigator.clipboard.writeText(o.textContent),r();return}else{console.debug("Falling back to legacy clipboard copy");let i=document.createRange();i.selectNodeContents(o);let l=window.getSelection();l.removeAllRanges(),l.addRange(i);try{document.execCommand("copy"),r()}catch(p){console.error(p)}l.removeRange(i)}}),t.classList.contains("highlight")?t.appendChild(e):o.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?o.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):o.parentNode.appendChild(e)});
