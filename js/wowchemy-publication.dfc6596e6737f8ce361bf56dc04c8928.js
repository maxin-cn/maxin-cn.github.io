var f={};var s={},a,r,l=$("#container-publications");if(l.length){l.isotope({itemSelector:".isotope-item",percentPosition:!0,masonry:{columnWidth:".grid-sizer"},filter:function(){let t=$(this),e=a?t.text().match(a):!0,o=r?t.is(r):!0;return e&&o}});let i=$(".filter-search").keyup(h(function(){a=new RegExp(i.val(),"gi"),l.isotope()}));$(".pub-filters").on("change",function(){let e=$(this)[0].getAttribute("data-filter-group");if(s[e]=this.value,r=p(s),l.isotope(),e==="pubtype"){let o=$(this).val();o.substr(0,9)===".pubtype-"?window.location.hash=o.substr(9):window.location.hash=""}})}function h(i,t){let e;return t=t||100,function(){clearTimeout(e);let u=arguments,n=this;function c(){i.apply(n,u)}e=setTimeout(c,t)}}function p(i){let t="";for(let e in i)t+=i[e];return t}function m(){if(!l.length)return;let i=window.location.hash.replace("#",""),t="*";i!=""&&(t=".pubtype-"+i);let e="pubtype";s[e]=t,r=p(s),l.isotope(),$(".pubtype-select").val(t)}document.addEventListener("DOMContentLoaded",function(){$(".pub-filters-select")&&m(),$(".js-cite-modal").click(function(i){i.preventDefault();let t=$(this).attr("data-filename"),e=$("#modal");e.find(".modal-body code").load(t,function(o,u,n){u=="error"?$("#modal-error").html("Error: "+n.status+" "+n.statusText):$(".js-download-cite").attr("href",t)}),e.modal("show")}),$(".js-copy-cite").click(function(i){i.preventDefault();let t=$(this).html(),e=$(this),o=document.querySelector("#modal .modal-body code").innerHTML;navigator.clipboard.writeText(o).then(function(){console.debug("Citation copied!"),e.html(f.copied),setTimeout(()=>{e.html(t)},2e3)}).catch(function(){console.error("Citation copy failed!"),e.html("Error!"),setTimeout(()=>{e.html(t)},2e3)})})});
